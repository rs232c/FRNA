<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <meta name="description" content="{{ description }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'edge-bg': '#0d0d0d',
                        'edge-surface': '#161616',
                        'edge-elevated': '#1f1f1f',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Custom styles for things Tailwind can't handle */
        .lazy-image { opacity: 0; transition: opacity 0.3s; }
        .lazy-image.loaded { opacity: 1; }
    </style>
</head>
<body class="bg-[#0f0f0f] text-gray-100 min-h-screen">
    <!-- Top Bar -->
    <div class="bg-[#0f0f0f]/50 backdrop-blur-sm border-b border-gray-900/30 py-2">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div class="w-full sm:w-auto flex-1">
                    <div class="relative flex items-center bg-[#161616]/50 backdrop-blur-sm rounded-full px-4 py-2 border border-gray-800/20 focus-within:border-blue-500/50 focus-within:ring-1 focus-within:ring-blue-500/20">
                        <span class="text-gray-400 mr-2">üîç</span>
                        <input type="text" placeholder="Search articles..." class="bg-transparent border-none outline-none text-gray-100 placeholder-gray-400 flex-1 w-full sm:w-64" id="searchInput">
                        <button class="text-gray-400 hover:text-blue-400 transition-colors ml-2" onclick="toggleSearchFilters()" title="Advanced Filters">‚öôÔ∏è</button>
                    </div>
                    <div class="hidden mt-3 p-4 bg-[#161616] rounded-lg border border-gray-800/30 shadow-xl" id="searchFilters">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Category:</label>
                                <select id="filterCategory" class="w-full bg-[#161616] border border-gray-800/30 text-gray-100 rounded-lg px-3 py-2 text-sm focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20">
                                    <option value="">All Categories</option>
                                    <option value="news">üì∞ News</option>
                                    <option value="entertainment">üé¨ Entertainment</option>
                                    <option value="sports">‚öΩ Sports</option>
                                    <option value="local">üìç Local</option>
                                    <option value="media">üé• Media</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Neighborhood:</label>
                                <select id="filterNeighborhood" class="w-full bg-[#161616] border border-gray-800/30 text-gray-100 rounded-lg px-3 py-2 text-sm focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20">
                                    <option value="">All Neighborhoods</option>
                                    <option value="north end">North End</option>
                                    <option value="south end">South End</option>
                                    <option value="highlands">Highlands</option>
                                    <option value="flint village">Flint Village</option>
                                    <option value="maplewood">Maplewood</option>
                                    <option value="downtown">Downtown</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Source:</label>
                                <select id="filterSource" class="w-full bg-[#161616] border border-gray-800/30 text-gray-100 rounded-lg px-3 py-2 text-sm focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20">
                                    <option value="">All Sources</option>
                                    {% for source in sources %}
                                    <option value="{{ source }}">{{ source }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">Date Range:</label>
                                <select id="filterDateRange" class="w-full bg-[#161616] border border-gray-800/30 text-gray-100 rounded-lg px-3 py-2 text-sm focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20">
                                    <option value="">All Time</option>
                                    <option value="today">Today</option>
                                    <option value="week">Last 7 Days</option>
                                    <option value="month">Last 30 Days</option>
                                </select>
                            </div>
                            <div class="flex items-end">
                                <button class="w-full bg-[#161616] hover:bg-[#1a1a1a] border border-gray-800/30 text-gray-100 px-4 py-2 rounded-lg text-sm font-medium transition-colors" onclick="clearFilters()">Clear Filters</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <a href="/admin" id="hamburgerMenuLink" class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg transition-colors inline-flex items-center justify-center w-10 h-10" title="Admin Panel">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </a>
                    <script>
                        // Update hamburger menu link based on session
                        (function() {
                            fetch('/api/session-check')
                                .then(response => response.json())
                                .then(data => {
                                    const link = document.getElementById('hamburgerMenuLink');
                                    if (data.logged_in && data.zip_code) {
                                        link.href = `/admin/${data.zip_code}`;
                                    } else {
                                        link.href = '/admin';
                                    }
                                })
                                .catch(err => {
                                    console.error('Error checking session:', err);
                                });
                        })();
                    </script>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav class="bg-[#0f0f0f]/80 backdrop-blur-md border-b border-gray-900/20 py-2 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div class="text-xl font-semibold text-blue-400">FRNA</div>
                {{ nav_tabs }}
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative">
        <!-- Fixed Location Badge (Top-Left) -->
        <div class="fixed top-4 left-4 z-50 bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg">
            {{ location_badge_text }}
        </div>
        
        <!-- Fixed Weather Pill (Top-Right) -->
        <a href="{{ weather_station_url }}" target="_blank" rel="noopener" class="fixed top-4 right-4 z-50 flex items-center gap-2 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg px-4 py-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
            <span class="text-xl">üå§Ô∏è</span>
            <div class="text-white">
                <div class="font-bold text-sm leading-tight">{{ weather.current.temperature }}{{ weather.current.unit }}</div>
                <div class="text-blue-100 text-xs">{{ weather.current.condition }}</div>
            </div>
        </a>
        
        <!-- Hero + Trending Row (65/35 split) -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-10 items-start">
            <!-- Massive Hero Carousel (65% - 8 columns) -->
            <div class="lg:col-span-8">
                {% if hero_articles and hero_articles|length > 0 %}
                <div class="relative rounded-xl overflow-hidden shadow-2xl h-[400px] lg:h-[600px]">
                    <!-- Carousel Container -->
                    <div class="top-stories-track relative h-full" style="display: flex; transition: transform 0.5s ease-in-out;">
                        {% for hero_article in hero_articles %}
                        <div class="story-slide flex-shrink-0 h-full relative" style="width: 100%; min-width: 100%;">
                            <a href="{{ hero_article.url }}" target="_blank" rel="noopener" class="group block relative w-full h-full">
                                {% if show_images and hero_article.image_url %}
                                <div class="relative h-full overflow-hidden">
                                    <img data-src="{{ hero_article.image_url }}" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" alt="{{ hero_article.title }}" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 lazy-image">
                                    <!-- Dark gradient overlay bottom 40% -->
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent" style="background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 40%, transparent 100%);"></div>
                                    <!-- Video play icon if video -->
                                    {% if hero_article._is_video %}
                                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20">
                                        <div class="bg-white/90 rounded-full p-4 shadow-2xl">
                                            <svg class="w-16 h-16 text-gray-900" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M8 5v14l11-7z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    {% endif %}
                                    <!-- Content overlay at bottom -->
                                    <div class="absolute bottom-0 left-0 right-0 p-8 lg:p-10">
                                        <h2 class="text-3xl lg:text-5xl font-bold text-white mb-4 line-clamp-3 group-hover:text-blue-300 transition-colors" style="font-size: 3rem; line-height: 1.2;">
                                            {{ hero_article.title }}
                                        </h2>
                                        <div class="flex items-center gap-3 text-sm text-gray-200">
                                            <span class="font-medium">{{ hero_article.source_display }}</span>
                                            <span>‚Ä¢</span>
                                            <span>{{ hero_article.formatted_date.split(' at ')[0] if ' at ' in hero_article.formatted_date else 'Recently' }}</span>
                                            {% if hero_article.reading_time %}
                                            <span>‚Ä¢</span>
                                            <span>{{ hero_article.reading_time }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% else %}
                                <div class="relative h-full overflow-hidden bg-gradient-to-br {{ hero_article.source_gradient }}">
                                    <!-- Subtle pattern overlay -->
                                    <div class="absolute inset-0 opacity-5" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(255,255,255,0.03) 20px, rgba(255,255,255,0.03) 40px);"></div>
                                    <!-- City skyline silhouette -->
                                    <div class="absolute bottom-0 left-0 right-0 h-32 opacity-3">
                                        <svg viewBox="0 0 400 100" class="w-full h-full" preserveAspectRatio="none">
                                            <path d="M0,100 L0,85 L15,82 L30,78 L45,75 L60,72 L75,70 L90,68 L105,66 L120,64 L135,62 L150,60 L165,58 L180,56 L195,54 L210,52 L225,50 L240,52 L255,54 L270,56 L285,58 L300,60 L315,62 L330,64 L345,66 L360,68 L375,70 L385,72 L400,75 L400,100 Z" fill="white"/>
                                        </svg>
                                    </div>
                                    <!-- Video play icon if video -->
                                    {% if hero_article._is_video %}
                                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20">
                                        <div class="bg-white/90 rounded-full p-4 shadow-2xl">
                                            <svg class="w-16 h-16 text-gray-900" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M8 5v14l11-7z"/>
                                            </svg>
                                        </div>
                                    </div>
                                    {% endif %}
                                    <!-- Content overlay at bottom -->
                                    <div class="absolute bottom-0 left-0 right-0 p-8 lg:p-10 bg-gradient-to-t from-black/95 via-black/70 to-transparent">
                                        <h2 class="text-3xl lg:text-5xl font-bold text-white mb-4 line-clamp-3 group-hover:text-blue-300 transition-colors" style="font-size: 3rem; line-height: 1.2;">
                                            {{ hero_article.title }}
                                        </h2>
                                        <div class="flex items-center gap-3 text-sm text-gray-200">
                                            <span class="font-medium">{{ hero_article.source_display }}</span>
                                            <span>‚Ä¢</span>
                                            <span>{{ hero_article.formatted_date.split(' at ')[0] if ' at ' in hero_article.formatted_date else 'Recently' }}</span>
                                            {% if hero_article.reading_time %}
                                            <span>‚Ä¢</span>
                                            <span>{{ hero_article.reading_time }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    
                    <!-- Navigation Arrows -->
                    {% if hero_articles|length > 1 %}
                    <button onclick="prevTopStory()" class="absolute left-4 top-1/2 transform -translate-y-1/2 z-30 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full p-3 transition-all duration-300 hover:scale-110" aria-label="Previous article">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <button onclick="nextTopStory()" class="absolute right-4 top-1/2 transform -translate-y-1/2 z-30 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full p-3 transition-all duration-300 hover:scale-110" aria-label="Next article">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                    
                    <!-- Navigation Dots -->
                    <div class="slider-dots absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-30">
                        {% for i in range(hero_articles|length) %}
                        <button onclick="goToTopStory({{ i }})" class="dot w-3 h-3 rounded-full {% if loop.first %}bg-white{% else %}bg-white/40{% endif %} hover:bg-white/60 transition-colors cursor-pointer" data-index="{{ i }}"></button>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            
            <!-- Narrow Trending Sidebar (35% - 4 columns) -->
            <aside class="lg:col-span-4">
                <div class="bg-[#161616] rounded-xl p-6 border border-gray-800/30">
                    <div class="flex items-center gap-2 mb-6">
                        <span class="text-2xl">üî•</span>
                        <h3 class="text-lg font-bold text-gray-100">Trending in {{ locale.split(',')[0] if ',' in locale else locale }}</h3>
                    </div>
                    <div class="space-y-4">
                        {% if trending_articles %}
                            {% for article in trending_articles[:8] %}
                            <a href="{{ article.url }}" target="_blank" rel="noopener" class="block group">
                                <div class="flex items-center gap-3 pb-4 border-b border-gray-800/30 last:border-0 hover:bg-[#1a1a1a] -mx-2 px-2 rounded-lg transition-colors">
                                    {% if show_images and article.image_url %}
                                    <div class="flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden bg-gradient-to-br from-[#161616] to-[#0f0f0f]">
                                        <img data-src="{{ article.image_url }}" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" alt="{{ article.title }}" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300 lazy-image">
                                    </div>
                                    {% else %}
                                    <div class="flex-shrink-0 w-16 h-16 rounded-lg bg-gradient-to-br {{ article.source_gradient }} flex items-center justify-center relative overflow-hidden">
                                        <div class="absolute inset-0 opacity-10" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.05) 5px, rgba(255,255,255,0.05) 10px);"></div>
                                        <div class="text-lg font-black text-white/90 drop-shadow-lg relative z-10">{{ article.source_initials }}</div>
                                    </div>
                                    {% endif %}
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center gap-1 mb-1">
                                            <span class="text-sm">üî•</span>
                                            <h4 class="text-sm font-semibold text-gray-100 group-hover:text-orange-400 transition-colors line-clamp-2">{{ article.title }}</h4>
                                        </div>
                                        <div class="text-xs text-gray-500">{{ article.source_display }} ‚Ä¢ {{ article.formatted_date.split(' at ')[0] if ' at ' in article.formatted_date else 'Recently' }}</div>
                                    </div>
                                </div>
                            </a>
                            {% endfor %}
                        {% else %}
                            <p class="text-gray-400 text-sm">No trending articles yet.</p>
                        {% endif %}
                    </div>
                </div>
            </aside>
        </div>
        
        <!-- Perfect Masonry Grid Below Hero (3-4 columns) -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="articlesGrid">
            {% if articles and articles|length > 0 %}
                {% for article in articles[:30] %}
            <article class="bg-[#161616] rounded-xl overflow-hidden shadow-lg hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-300 hover:scale-[1.03] border border-gray-800/30 flex flex-col h-full" data-category="{{ article.category }}" data-neighborhoods="{{ article.neighborhoods|join(',') if article.neighborhoods else '' }}">
                <!-- Square Thumbnail Top -->
                {% if show_images and article.image_url %}
                <div class="relative aspect-square overflow-hidden bg-gradient-to-br from-gray-700 to-gray-900">
                    <img data-src="{{ article.image_url }}" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" alt="{{ article.title }}" loading="lazy" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500 lazy-image">
                    <!-- Source pill bottom-left -->
                    <div class="absolute bottom-4 left-4 bg-black/60 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium text-white">
                        {{ article.source_display }}
                    </div>
                </div>
                {% else %}
                <div class="relative aspect-square overflow-hidden bg-gradient-to-br {{ article.source_gradient }} flex items-center justify-center">
                    <!-- Subtle pattern overlay -->
                    <div class="absolute inset-0 opacity-10" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.05) 10px, rgba(255,255,255,0.05) 20px);"></div>
                    <!-- City skyline silhouette -->
                    <div class="absolute bottom-0 left-0 right-0 h-16 opacity-5">
                        <svg viewBox="0 0 400 100" class="w-full h-full" preserveAspectRatio="none">
                            <path d="M0,100 L0,80 L20,75 L40,70 L60,65 L80,60 L100,55 L120,50 L140,45 L160,50 L180,55 L200,60 L220,65 L240,70 L260,75 L280,80 L300,75 L320,70 L340,65 L360,60 L380,55 L400,50 L400,100 Z" fill="white"/>
                        </svg>
                    </div>
                    <!-- Source initials -->
                    <div class="text-center relative z-10">
                        <div class="text-6xl font-black text-white/90 drop-shadow-2xl tracking-tight" style="text-shadow: 0 4px 12px rgba(0,0,0,0.3);">{{ article.source_initials }}</div>
                    </div>
                    <!-- Source pill bottom-left -->
                    <div class="absolute bottom-4 left-4 bg-black/60 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium text-white">
                        {{ article.source_display }}
                    </div>
                </div>
                {% endif %}
                
                <!-- Content -->
                <div class="p-4 flex-1 flex flex-col">
                    <h3 class="text-base font-bold mb-2 line-clamp-2 text-gray-100 hover:text-blue-400 transition-colors">
                        <a href="{{ article.url }}" target="_blank" rel="noopener">{{ article.title }}</a>
                    </h3>
                    
                    <!-- Exactly 2-line snippet -->
                    <p class="text-xs text-gray-300 mb-3 line-clamp-2 flex-1">{{ article.summary[:100] if article.summary else '' }}{% if article.summary and article.summary|length > 100 %}...{% endif %}</p>
                    
                    <div class="flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-800/30">
                        <span>{{ article.formatted_date.split(' at ')[0] if ' at ' in article.formatted_date else 'Recently' }}</span>
                        {% if article.reading_time %}
                        <span>{{ article.reading_time }}</span>
                        {% endif %}
                    </div>
                    
                    {% if article._related_articles %}
                    <div class="mt-4 pt-4 border-t border-gray-800/30">
                        <button onclick="toggleRelated(this)" class="text-xs text-gray-400 hover:text-gray-300 transition-colors w-full text-left">
                            üìé Related ({{ article._related_articles|length }})
                        </button>
                        <div class="hidden mt-2 pl-4 border-l-2 border-blue-500">
                            {% for related in article._related_articles %}
                            <div class="mb-2">
                                <a href="{{ related.url }}" target="_blank" rel="noopener" class="text-sm text-blue-400 hover:text-blue-300 transition-colors block">
                                    {{ related.title[:60] }}{% if related.title|length > 60 %}...{% endif %}
                                </a>
                                <span class="text-xs text-gray-500">{{ related.source_display }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </article>
                {% endfor %}
            {% else %}
            <div class="col-span-full text-center py-12">
                <p class="text-gray-400">No articles found. Check back soon!</p>
            </div>
            {% endif %}
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="bg-[#0f0f0f] border-t border-gray-900/30 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div>
                    <h4 class="text-lg font-bold text-gray-100 mb-3">Stay Informed</h4>
                    <p class="text-gray-400 text-sm mb-4">Get daily news updates delivered to your inbox.</p>
                    <form class="flex flex-col sm:flex-row gap-2" id="newsletterForm" onsubmit="handleNewsletterSignup(event)">
                        <input type="email" placeholder="Enter your email" class="flex-1 bg-[#161616] border border-gray-800/30 text-gray-100 rounded-lg px-4 py-2 text-sm focus:border-blue-500/50 focus:ring-1 focus:ring-blue-500/20 outline-none" id="newsletterEmail" required>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg text-sm font-semibold transition-colors">Subscribe</button>
                    </form>
                    <div class="text-sm mt-2 min-h-[1.2rem]" id="newsletterMessage"></div>
                </div>
                <div>
                    <h4 class="text-lg font-bold text-gray-100 mb-3">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-400 hover:text-blue-400 transition-colors text-sm">Home</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-6 border-t border-gray-900/30 text-center">
                <p class="text-gray-500 text-sm">&copy; {{ current_year }} {{ locale }} News Aggregator. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Mobile Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-[#0f0f0f]/95 backdrop-blur-md border-t border-gray-900/30 px-4 py-2 flex justify-around items-center z-50 lg:hidden">
        <a href="index.html" class="flex flex-col items-center gap-1 text-gray-400 hover:text-blue-400 transition-colors py-2 px-4 rounded-lg min-h-[44px] min-w-[44px]">
            <span class="text-xl">üè†</span>
            <span class="text-xs">Home</span>
        </a>
        <a href="{{ weather_station_url }}" target="_blank" rel="noopener" class="flex flex-col items-center gap-1 text-gray-400 hover:text-blue-400 transition-colors py-2 px-4 rounded-lg min-h-[44px] min-w-[44px]">
            <span class="text-xl">üå§Ô∏è</span>
            <span class="text-xs">Weather</span>
        </a>
    </nav>
    
    <!-- Back to Top Button -->
    <button class="fixed bottom-20 right-6 bg-blue-500 hover:bg-blue-600 text-white w-12 h-12 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 hidden lg:block z-40" id="backToTop" onclick="scrollToTop()" title="Back to top">‚Üë</button>
    
    <script src="js/main.js"></script>
    <script>
        // Lazy image loading
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.add('loaded');
                        observer.unobserve(img);
                    }
                });
            });
            images.forEach(img => imageObserver.observe(img));
        });
    </script>
</body>
</html>