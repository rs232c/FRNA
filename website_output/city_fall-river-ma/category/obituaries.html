<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obituaries - Fall River, MA News</title>
    <meta name="description" content="Remembering loved ones from Fall River, MA. View obituaries and memorial services.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'serif': ['Georgia', 'Times New Roman', 'serif'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .lazy-image { opacity: 0; transition: opacity 0.3s; }
        .lazy-image.loaded { opacity: 1; }
        
        /* Obituary-specific elegant styling */
        .obituary-name {
            font-family: Georgia, 'Times New Roman', serif;
            font-weight: 400;
            letter-spacing: 0.5px;
        }
        
        .obituary-card {
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        
        .obituary-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }
        
        .hero-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, transparent 100%);
        }
    </style>
</head>
<body class="bg-[#f8f8f8] text-gray-800 min-h-screen">
    <!-- Top Bar -->
    <div class="bg-white border-b border-gray-200 py-3">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div class="w-full sm:w-auto flex-1">
                    <div class="relative flex items-center bg-gray-50 rounded-lg px-4 py-2 border border-gray-200">
                        <span class="text-gray-400 mr-2">üîç</span>
                        <input type="text" placeholder="Search by name..." class="bg-transparent border-none outline-none text-gray-800 placeholder-gray-400 flex-1 w-full sm:w-64" id="obituarySearch">
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <select id="funeralHomeFilter" class="bg-gray-50 border border-gray-200 rounded-lg px-4 py-2 text-gray-800 text-sm focus:border-gray-400 focus:outline-none">
                        <option value="">All Funeral Homes</option>
                        
                    </select>
                    <a href="mailto:obituaries@fallrivernews.local?subject=Submit Obituary" class="bg-[#6b7280] hover:bg-[#4b5563] text-white px-6 py-2 rounded-lg text-sm font-medium transition-colors">
                        Submit an Obituary
                    </a>
                    <a href="/admin" id="hamburgerMenuLink" class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg transition-colors inline-flex items-center justify-center w-10 h-10" title="Admin Panel">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </a>
                    <script>
                        // Update hamburger menu link based on session
                        (function() {
                            fetch('/api/session-check')
                                .then(response => response.json())
                                .then(data => {
                                    const link = document.getElementById('hamburgerMenuLink');
                                    if (data.logged_in && data.zip_code) {
                                        link.href = `/admin/${data.zip_code}`;
                                    } else {
                                        link.href = '/admin';
                                    }
                                })
                                .catch(err => {
                                    console.error('Error checking session:', err);
                                });
                        })();
                    </script>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200 py-3 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div class="text-2xl font-semibold text-gray-800">FRNA</div>
                
    <!-- Desktop Navigation: Two Rows - Centered -->
    <div class="hidden lg:flex flex-col items-center gap-3 w-full">
        <!-- Top Row: Primary Navigation (Big, Bold) -->
        <div class="flex flex-wrap items-center justify-center gap-2 lg:gap-3">
            <a href="../index.html" class="nav-category-link px-4 py-2.5 rounded-md text-base lg:text-lg font-bold transition-all duration-200 text-gray-300 hover:text-white font-bold border border-transparent hover:border-gray-700 hover:bg-gray-900/30" data-tab="all">Home</a> <span class="text-gray-700 mx-2 text-sm">‚Ä¢</span> 
            <a href="local-news.html" class="nav-category-link px-4 py-2.5 rounded-md text-base lg:text-lg font-bold transition-all duration-200 text-gray-300 hover:text-white font-bold border border-transparent hover:border-gray-700 hover:bg-gray-900/30" data-category-slug="local-news">Local</a> <span class="text-gray-700 mx-2 text-sm">‚Ä¢</span> 
            <a href="crime.html" class="nav-category-link px-4 py-2.5 rounded-md text-base lg:text-lg font-bold transition-all duration-200 text-gray-300 hover:text-white font-bold border border-transparent hover:border-gray-700 hover:bg-gray-900/30" data-category-slug="crime">Police & Fire</a> <span class="text-gray-700 mx-2 text-sm">‚Ä¢</span> 
            <a href="sports.html" class="nav-category-link px-4 py-2.5 rounded-md text-base lg:text-lg font-bold transition-all duration-200 text-gray-300 hover:text-white font-bold border border-transparent hover:border-gray-700 hover:bg-gray-900/30" data-category-slug="sports">Sports</a> <span class="text-gray-700 mx-2 text-sm">‚Ä¢</span> 
            <a href="obituaries.html" class="nav-category-link px-4 py-2.5 rounded-md text-base lg:text-lg font-bold transition-all duration-200 text-white font-bold bg-blue-500/20 border border-blue-500/40" data-category-slug="obituaries">Obituaries</a> <span class="text-gray-700 mx-2 text-sm">‚Ä¢</span> 
            <a href="food.html" class="nav-category-link px-4 py-2.5 rounded-md text-base lg:text-lg font-bold transition-all duration-200 text-gray-300 hover:text-white font-bold border border-transparent hover:border-gray-700 hover:bg-gray-900/30" data-category-slug="food">Food & Drink</a>
        </div>
        
        <!-- Second Row: Secondary Navigation (Smaller, Lighter) - Centered under first row -->
        <div class="flex flex-wrap items-center justify-center gap-2 lg:gap-3">
            <a href="media.html" class="nav-category-link px-3 py-1.5 rounded-md text-sm lg:text-base transition-all duration-200 text-gray-500 hover:text-gray-300 font-medium border border-transparent hover:border-gray-800 hover:bg-gray-900/20" data-category-slug="media">Media</a> <span class="text-gray-800 mx-1.5 text-xs">‚Ä¢</span> 
            <a href="scanner.html" class="nav-category-link px-3 py-1.5 rounded-md text-sm lg:text-base transition-all duration-200 text-gray-500 hover:text-gray-300 font-medium border border-transparent hover:border-gray-800 hover:bg-gray-900/20" data-category-slug="scanner">Scanner</a> <span class="text-gray-800 mx-1.5 text-xs">‚Ä¢</span> 
            <a href="weather.html" class="nav-category-link px-3 py-1.5 rounded-md text-sm lg:text-base transition-all duration-200 text-gray-500 hover:text-gray-300 font-medium border border-transparent hover:border-gray-800 hover:bg-gray-900/20" data-category-slug="weather">Weather</a> <span class="text-gray-800 mx-1.5 text-xs">‚Ä¢</span> 
            <a href="#" class="nav-category-link px-3 py-1.5 rounded-md text-sm lg:text-base transition-all duration-200 text-gray-500 hover:text-gray-300 font-medium border border-transparent hover:border-gray-800 hover:bg-gray-900/20" data-category-slug="submit-tip">Submit Tip</a> <span class="text-gray-800 mx-1.5 text-xs">‚Ä¢</span> 
            <a href="#" class="nav-category-link px-3 py-1.5 rounded-md text-sm lg:text-base transition-all duration-200 text-gray-500 hover:text-gray-300 font-medium border border-transparent hover:border-gray-800 hover:bg-gray-900/20" data-category-slug="lost-found">Lost & Found</a> <span class="text-gray-800 mx-1.5 text-xs">‚Ä¢</span> 
            <a href="events.html" class="nav-category-link px-3 py-1.5 rounded-md text-sm lg:text-base transition-all duration-200 text-gray-500 hover:text-gray-300 font-medium border border-transparent hover:border-gray-800 hover:bg-gray-900/20" data-category-slug="events">Events</a>
        </div>
    </div>
    
    <!-- Custom Hamburger Menu - Side Drawer Overlay -->
    <div id="mobileNavMenu" class="hidden fixed inset-0 z-[100] transition-opacity duration-300" style="opacity: 0;">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-black/70 backdrop-blur-sm" onclick="closeHamburgerMenu()"></div>
        <!-- Side Drawer -->
        <div id="hamburgerDrawer" class="fixed top-0 right-0 h-full w-full max-w-md bg-[#161616] shadow-2xl overflow-y-auto transform transition-transform duration-300 ease-out" style="transform: translateX(100%);" onclick="event.stopPropagation()">
            <!-- Header -->
            <div class="sticky top-0 bg-gradient-to-r from-[#161616] to-[#1a1a1a] border-b border-gray-800/50 p-5 flex items-center justify-between z-10 shadow-lg">
                <div class="flex items-center gap-3">
                    <div class="text-2xl font-bold text-blue-400">FRNA</div>
                    <span class="text-xs text-gray-500 uppercase tracking-wider">Menu</span>
                </div>
                <button id="closeMobileNav" class="text-gray-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-800/50" aria-label="Close menu" onclick="closeHamburgerMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Menu Content -->
            <div class="p-5 space-y-6">
                <!-- Admin Section (Top) - Collapsible Submenu -->
                <div class="pb-4 border-b border-gray-800/50">
                    <button id="adminMenuToggle" class="w-full flex items-center justify-between px-4 py-3 rounded-lg bg-gradient-to-r from-blue-600/20 to-blue-500/10 border border-blue-500/30 hover:border-blue-500/50 transition-all group" onclick="toggleAdminSubmenu(event)">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center group-hover:bg-blue-500/30 transition-colors">
                                <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <div class="text-white font-semibold">Admin Panel</div>
                                <div class="text-xs text-gray-400">Manage articles & settings</div>
                            </div>
                        </div>
                        <svg id="adminMenuArrow" class="w-5 h-5 text-gray-400 group-hover:text-white transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <!-- Admin Submenu (Hidden by default) -->
                    <div id="adminSubmenu" class="hidden mt-2 pl-4 space-y-2">
                        <a href="#" id="adminLink" class="block px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-[#1a1a1a]/50 transition-colors text-sm">Current Zip Admin</a>
                        <a href="/admin" class="block px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-[#1a1a1a]/50 transition-colors text-sm">Main Admin Dashboard</a>
                    </div>
                </div>
                
                <!-- Navigation Links Section -->
                <div class="space-y-4">
                    <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Navigation</div>
                    
                    <!-- Home Link (No Toggle) -->
                    <a href="../index.html" class="flex items-center px-4 py-3 rounded-lg text-gray-200 hover:text-white hover:bg-[#1a1a1a] transition-colors border border-transparent hover:border-gray-800" data-tab="all">
                        <svg class="w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                        <span class="font-semibold">Home</span>
                    </a>
                </div>
                
                <!-- Category Controls Section -->
                <div class="space-y-4">
                    <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Category Controls</div>
                    <p class="text-xs text-gray-400 mb-4 px-2">Toggle categories on/off to customize your navigation</p>
                    
                    <!-- Primary Categories -->
                    <div class="space-y-2">
                        <div class="text-xs font-medium text-gray-500 px-2 mb-2">Primary Navigation</div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="local-news">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="local-news.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="local-news">Local</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="local-news" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="crime">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="crime.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="crime">Police & Fire</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="crime" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="sports">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="sports.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="sports">Sports</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="sports" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="obituaries">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="obituaries.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="obituaries">Obituaries</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="obituaries" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="food">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="food.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="food">Food & Drink</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="food" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Secondary Categories -->
                    <div class="space-y-2 pt-2">
                        <div class="text-xs font-medium text-gray-500 px-2 mb-2">Secondary Navigation</div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="media">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="media.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="media">Media</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="media" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="scanner">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="scanner.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="scanner">Scanner</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="scanner" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="weather">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="weather.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="weather">Weather</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="weather" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="submit-tip">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="#" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="submit-tip">Submit Tip</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="submit-tip" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="lost-found">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="#" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="lost-found">Lost & Found</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="lost-found" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg bg-[#1a1a1a]/50 border border-gray-800/30 hover:border-gray-700 transition-colors" data-category-slug="events">
                            <div class="flex items-center gap-3 flex-1">
                                <a href="events.html" class="nav-category-link text-gray-200 hover:text-white font-medium transition-colors flex-1" data-category-slug="events">Events</a>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer ml-4">
                                <input type="checkbox" class="category-toggle-switch sr-only peer" data-category-slug="events" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Custom Hamburger Menu with Smooth Animations
        function openHamburgerMenu() {
            const menu = document.getElementById('mobileNavMenu');
            const drawer = document.getElementById('hamburgerDrawer');
            if (!menu || !drawer) {
                console.error('Hamburger menu elements not found:', { menu: !!menu, drawer: !!drawer });
                return;
            }
            
            menu.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Trigger animation
            requestAnimationFrame(() => {
                menu.style.opacity = '1';
                drawer.style.transform = 'translateX(0)';
            });
            
            // Update toggle switch states
            updateToggleSwitches();
        }
        
        function closeHamburgerMenu() {
            const menu = document.getElementById('mobileNavMenu');
            const drawer = document.getElementById('hamburgerDrawer');
            if (!menu || !drawer) return;
            
            // Animate out
            menu.style.opacity = '0';
            drawer.style.transform = 'translateX(100%)';
            
            setTimeout(() => {
                menu.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }
        
        function updateToggleSwitches() {
            // Wait for CategoryPreferences to be available
            if (!window.CategoryPreferences) {
                setTimeout(updateToggleSwitches, 100);
                return;
            }
            
            document.querySelectorAll('.category-toggle-switch').forEach(switchEl => {
                const categorySlug = switchEl.dataset.categorySlug;
                if (categorySlug) {
                    const isEnabled = window.CategoryPreferences.isCategoryEnabled(categorySlug);
                    switchEl.checked = isEnabled;
                }
            });
        }
        
        // Initialize menu - wait for DOM and CategoryPreferences
        function initHamburgerMenu() {
            const toggle = document.getElementById('mobileNavToggle');
            const menu = document.getElementById('mobileNavMenu');
            const closeBtn = document.getElementById('closeMobileNav');
            
            if (!toggle || !menu) {
                // Retry if elements not found yet
                setTimeout(initHamburgerMenu, 100);
                return;
            }
            
            // Hamburger button click handler
            toggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                openHamburgerMenu();
            });
            
            // Close button handler
            if (closeBtn) {
                closeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeHamburgerMenu();
                });
            }
            
            // Close on backdrop click
            const backdrop = menu.querySelector('.backdrop-blur-sm');
            if (backdrop) {
                backdrop.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeHamburgerMenu();
                });
            }
            
            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && !menu.classList.contains('hidden')) {
                    closeHamburgerMenu();
                }
            });
            
            // Handle toggle switch changes
            menu.addEventListener('change', function(e) {
                if (e.target.classList.contains('category-toggle-switch')) {
                    const categorySlug = e.target.dataset.categorySlug;
                    const isEnabled = e.target.checked;
                    
                    if (categorySlug) {
                        // Wait for CategoryPreferences if not ready
                        if (!window.CategoryPreferences) {
                            setTimeout(() => {
                                if (window.CategoryPreferences) {
                                    window.CategoryPreferences.toggleCategory(categorySlug, isEnabled);
                                    if (window.NavigationFilter) {
                                        window.NavigationFilter.applyFilters();
                                    }
                                }
                            }, 100);
                        } else {
                            window.CategoryPreferences.toggleCategory(categorySlug, isEnabled);
                            if (window.NavigationFilter) {
                                window.NavigationFilter.applyFilters();
                            }
                        }
                    }
                }
            });
            
            // Close menu when clicking navigation links (but not toggle switches)
            menu.querySelectorAll('a.nav-category-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!e.target.closest('label') && !e.target.closest('.category-toggle-switch')) {
                        setTimeout(() => closeHamburgerMenu(), 200);
                    }
                });
            });
            
            // Update switches when preferences change
            window.addEventListener('categoryPreferencesChanged', updateToggleSwitches);
            
            // Initial update after CategoryPreferences loads
            function waitForCategoryPreferences() {
                if (window.CategoryPreferences) {
                    updateToggleSwitches();
                } else {
                    setTimeout(waitForCategoryPreferences, 100);
                }
            }
            waitForCategoryPreferences();
        }
        
        // Start initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initHamburgerMenu);
        } else {
            initHamburgerMenu();
        }
        
        // Make functions globally available for onclick handlers
        window.openHamburgerMenu = openHamburgerMenu;
        window.closeHamburgerMenu = closeHamburgerMenu;
        
        // Update mobile toggle icons based on preferences
        function updateMobileToggleIcons() {
            if (!window.CategoryPreferences) {
                setTimeout(updateMobileToggleIcons, 100);
                return;
            }
            
            document.querySelectorAll('.category-toggle-btn').forEach(btn => {
                const slug = btn.dataset.categorySlug;
                if (slug) {
                    const isEnabled = window.CategoryPreferences.isCategoryEnabled(slug);
                    const icon = btn.querySelector('.category-toggle-icon');
                    if (icon) {
                        icon.textContent = isEnabled ? '‚úì' : '‚úï';
                        icon.className = isEnabled 
                            ? 'category-toggle-icon text-lg text-green-400' 
                            : 'category-toggle-icon text-lg text-red-400';
                    }
                }
            });
        }
        
        // Make function globally available
        window.updateMobileToggleIcons = updateMobileToggleIcons;
        
        // Handle toggle button clicks
        document.addEventListener('click', function(e) {
            const toggleBtn = e.target.closest('.category-toggle-btn');
            if (toggleBtn && window.CategoryPreferences) {
                e.preventDefault();
                e.stopPropagation();
                
                const slug = toggleBtn.dataset.categorySlug;
                if (slug) {
                    const currentState = window.CategoryPreferences.isCategoryEnabled(slug);
                    const newState = !currentState;
                    window.CategoryPreferences.toggleCategory(slug, newState);
                    
                    // Update icons
                    updateMobileToggleIcons();
                    
                    // Update navigation visibility
                    if (window.NavigationFilter) {
                        window.NavigationFilter.applyFilters();
                    }
                }
            }
        });
        
        // Toggle admin submenu
        function toggleAdminSubmenu(e) {
            e.preventDefault();
            e.stopPropagation();
            const submenu = document.getElementById('adminSubmenu');
            const arrow = document.getElementById('adminMenuArrow');
            if (submenu && arrow) {
                const isHidden = submenu.classList.contains('hidden');
                if (isHidden) {
                    submenu.classList.remove('hidden');
                    arrow.style.transform = 'rotate(180deg)';
                } else {
                    submenu.classList.add('hidden');
                    arrow.style.transform = 'rotate(0deg)';
                }
            }
        }
        window.toggleAdminSubmenu = toggleAdminSubmenu;
        
        // Update admin link with current zip code and initialize icons
        document.addEventListener('DOMContentLoaded', function() {
            const adminLink = document.getElementById('adminLink');
            if (adminLink) {
                // Get current zip from URL or localStorage
                const pathMatch = window.location.pathname.match(/^\/(\d{5})/);
                const zipFromPath = pathMatch ? pathMatch[1] : null;
                const zipFromStorage = localStorage.getItem('currentZip');
                const currentZip = zipFromPath || zipFromStorage || '02720';
                
                adminLink.href = `/admin/${currentZip}`;
                adminLink.textContent = `Zip ${currentZip} Admin`;
            }
            
            // Initial icon update - wait for CategoryPreferences to be ready
            function initIcons() {
                if (window.CategoryPreferences && window.updateMobileToggleIcons) {
                    window.updateMobileToggleIcons();
                } else {
                    setTimeout(initIcons, 100);
                }
            }
            initIcons();
        });
    </script>

            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Fixed Location Badge (Top-Left) -->
        <div class="fixed top-4 left-4 z-50 bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg">
            Fall River ¬∑ 02720
        </div>
        
        <!-- Fixed Weather Pill (Top-Right) -->
        <a href="https://www.wunderground.com/weather/us/ma/fall-river" target="_blank" rel="noopener" class="fixed top-4 right-4 z-50 flex items-center gap-2 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg px-4 py-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
            <span class="text-xl">üå§Ô∏è</span>
            <div class="text-white">
                <div class="font-bold text-sm leading-tight">36¬∞F</div>
                <div class="text-blue-100 text-xs">Clear</div>
            </div>
        </a>
        
        <!-- Page Header -->
        <div class="mb-12 text-center">
            <h1 class="text-5xl font-light obituary-name text-gray-900 mb-4">Obituaries</h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">Remembering and honoring the lives of those we've lost in Fall River</p>
        </div>
        
        <!-- Hero Obituary (Today's Most Prominent) -->
        
        
        <!-- Today's Obituaries Section -->
        <div class="mb-8">
            <h2 class="text-3xl font-light obituary-name text-gray-900 mb-2">Today's Obituaries</h2>
            <p class="text-gray-600">Remembering those who passed away recently</p>
        </div>
        
        <!-- Obituaries Grid -->
        
        <div class="bg-white rounded-lg p-12 text-center border border-gray-200">
            <div class="text-6xl mb-4">üïäÔ∏è</div>
            <h3 class="text-2xl obituary-name text-gray-900 mb-3">No Obituaries Found</h3>
            <p class="text-gray-600 mb-2">We're updating our obituaries listings.</p>
            <p class="text-gray-500 text-sm mb-6">Please check back soon for the latest obituaries from Fall River.</p>
            <div class="flex flex-col sm:flex-row gap-3 justify-center">
                <a href="../index.html" class="px-6 py-3 bg-[#6b7280] hover:bg-[#4b5563] text-white rounded-lg transition-colors font-medium">‚Üê Back to Home</a>
                <a href="mailto:obituaries@fallrivernews.local?subject=Submit Obituary" class="px-6 py-3 bg-white hover:bg-gray-50 text-gray-800 rounded-lg transition-colors font-medium border border-gray-300">Submit an Obituary</a>
            </div>
        </div>
        
    </main>
    
    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <p>&copy; 2025 Fall River, MA News. All rights reserved.</p>
            <p class="mt-2">If you would like to submit an obituary, please <a href="mailto:obituaries@fallrivernews.local" class="text-[#6b7280] hover:text-[#4b5563] underline">contact us</a>.</p>
        </div>
    </footer>
    
    <script src="../js/main.js"></script>
    <script>
        // Obituary search and filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('obituarySearch');
            const funeralHomeFilter = document.getElementById('funeralHomeFilter');
            const obituariesGrid = document.getElementById('obituariesGrid');
            
            function filterObituaries() {
                const searchTerm = (searchInput?.value || '').toLowerCase();
                const selectedHome = (funeralHomeFilter?.value || '').toLowerCase();
                const articles = obituariesGrid?.querySelectorAll('article') || [];
                
                let visibleCount = 0;
                
                articles.forEach(article => {
                    const name = article.dataset.name || '';
                    const funeralHome = article.dataset.funeralHome || '';
                    
                    let matches = true;
                    
                    // Search by name
                    if (searchTerm && !name.includes(searchTerm)) {
                        matches = false;
                    }
                    
                    // Filter by funeral home
                    if (selectedHome && funeralHome !== selectedHome) {
                        matches = false;
                    }
                    
                    if (matches) {
                        article.style.display = '';
                        visibleCount++;
                    } else {
                        article.style.display = 'none';
                    }
                });
                
                // Show message if no results
                let noResultsMsg = obituariesGrid?.querySelector('.no-results-message');
                if (visibleCount === 0 && (searchTerm || selectedHome)) {
                    if (!noResultsMsg) {
                        noResultsMsg = document.createElement('div');
                        noResultsMsg.className = 'no-results-message col-span-full bg-white rounded-lg p-12 text-center border border-gray-200';
                        noResultsMsg.innerHTML = `
                            <div class="text-4xl mb-4">üîç</div>
                            <h3 class="text-xl obituary-name text-gray-900 mb-2">No obituaries found</h3>
                            <p class="text-gray-600 text-sm">Try adjusting your search or filter criteria.</p>
                        `;
                        obituariesGrid.appendChild(noResultsMsg);
                    }
                    noResultsMsg.style.display = 'block';
                } else if (noResultsMsg) {
                    noResultsMsg.style.display = 'none';
                }
            }
            
            if (searchInput) {
                searchInput.addEventListener('input', filterObituaries);
            }
            
            if (funeralHomeFilter) {
                funeralHomeFilter.addEventListener('change', filterObituaries);
            }
            
            // Lazy load images
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                                img.classList.add('loaded');
                                observer.unobserve(img);
                            }
                        }
                    });
                }, { rootMargin: '50px' });
                
                document.querySelectorAll('img[data-src]').forEach(img => {
                    imageObserver.observe(img);
                });
            }
        });
    </script>
</body>
</html>